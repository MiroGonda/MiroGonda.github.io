<!DOCTYPE html>
<html>
<head>
  <title>Design Approval Gallery</title>
  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
    }

    .swiper-container {
      width: 100%;
      height: 80vh;
    }

    .swiper-slide {
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    img {
      max-width: 100%;
      max-height: 65vh;
      margin: 0 auto;
      display: block;
    }

    .buttons {
      text-align: center;
      margin: 20px 0;
    }

    .approve,
    .revise {
      margin: 0 5px;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
      color: #fff;
      font-size: 14px;
      outline: none;
    }

    .approve {
      background-color: #28a745; /* Green */
    }

    .revise {
      background-color: #007bff; /* Blue */
    }

    .revision-input {
      display: none;
      margin-top: 10px;
      text-align: center;
    }

    .revision-input textarea {
      width: 300px;
      height: 80px;
    }
  </style>
</head>
<body>
  <div class="swiper-container">
    <div class="swiper-wrapper"></div>
    <!-- Swiper Controls -->
    <div class="swiper-pagination"></div>
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
  </div>

  <div class="buttons">
    <button class="approve" onclick="handleApprove()">Approve</button>
    <button class="revise" onclick="showRevisionInput()">Revise</button>
    <div class="revision-input">
      <textarea id="revisionText" placeholder="Enter revisions..."></textarea>
      <button onclick="handleRevise()">Submit Revision</button>
    </div>
  </div>

  <!-- Swiper JS -->
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script>
    // Replace these URLs with your raw GitHub image URLs
    const placeholderData = [
      {
        name: "Stepper - Circular (Option 2)",
        figmaLink: "#",
        pngUrl: "https://raw.githubusercontent.com/MiroGonda/MiroGonda.github.io/main/Stepper%20-%20Circular%20(Option%202).png"
      },
      {
        name: "Template Screen",
        figmaLink: "#",
        pngUrl: "https://raw.githubusercontent.com/MiroGonda/MiroGonda.github.io/main/Template%20Screen.png"
      }
    ];

    let currentRow = 1; // Tracks the current row in the carousel
    let swiper;         // Reference to the Swiper instance

    // Function to initialize the carousel with placeholder data
    function initializeCarousel() {
      const swiperWrapper = document.querySelector(".swiper-wrapper");

      placeholderData.forEach((item, index) => {
        const slideHTML = `
          <div class="swiper-slide">
            <h3>${item.name}</h3>
            <a href="${item.figmaLink}" target="_blank">
              <img src="${item.pngUrl}" alt="${item.name}" onerror="this.src=''; console.error('Image failed to load:', '${item.pngUrl}')"/>
            </a>
          </div>
        `;

        swiperWrapper.insertAdjacentHTML("beforeend", slideHTML);
      });

      // Initialize Swiper after inserting slides
      swiper = new Swiper(".swiper-container", {
        pagination: { el: ".swiper-pagination", clickable: true },
        navigation: { nextEl: ".swiper-button-next", prevEl: ".swiper-button-prev" },
        loop: false,
        keyboard: true,
        on: {
          slideChange: () => {
            currentRow = swiper.activeIndex + 1; // Update current row
            console.log("Slide changed. Current row:", currentRow);
          }
        }
      });
    }

    // Initialize the carousel on page load
    initializeCarousel();

    function handleApprove() {
      updateStatus("Approved");
    }

    function showRevisionInput() {
      document.querySelector(".revision-input").style.display = "block";
    }

    function handleRevise() {
      const revisionText = document.getElementById("revisionText").value;
      if (revisionText) {
        updateStatus(`Revise: ${revisionText}`);
        document.querySelector(".revision-input").style.display = "none";
        document.getElementById("revisionText").value = "";
      } else {
        alert("Please enter revision notes!");
      }
    }

    // Placeholder function for updating status (no Google Sheets integration)
    function updateStatus(status) {
      console.log(`Updating status for row ${currentRow}: ${status}`);
      alert(`Status updated for row ${currentRow}: ${status}`);
    }
  </script>
</body>
</html>
